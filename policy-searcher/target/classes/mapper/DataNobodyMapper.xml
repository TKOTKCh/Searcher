<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.searchengine.dao.DataNoBodyDao">

    <resultMap id="DataNoBodyMap" type="com.searchengine.entity.DataNoBody">
        <id column="id" property="id"></id>
        <result column="word" property="word"></result>
    </resultMap>


    <select id="getAllDataNoBodys" resultType="com.searchengine.entity.DataNoBody">
        select *
        from ${table}
    </select>

    <!--

    -->
    <select id="getDataBySplit" resultType="com.searchengine.entity.Data">
        select url, caption, id
        from data
        where id in (
            select db.data_id
            from (
                     select data_id
                     from (
                              ${sql}
                              ) tb1
                     group by data_id
                     order by sum(tidif_value) desc limit ${pageSize}
                         offset ${offset}
                 ) db
        )
    </select>

</mapper>